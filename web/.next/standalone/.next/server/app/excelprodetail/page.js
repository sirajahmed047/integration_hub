(()=>{var e={};e.id=899,e.ids=[899],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},41730:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>c,routeModule:()=>u,tree:()=>o});var a=s(67096),i=s(16132),n=s(37284),l=s.n(n),d=s(32564),r={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(r[e]=()=>d[e]);s.d(t,r);let o=["",{children:["excelprodetail",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,28200)),"/Users/siraj/development/integration_hub/web/src/app/excelprodetail/page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,85941)),"/Users/siraj/development/integration_hub/web/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/siraj/development/integration_hub/web/src/app/excelprodetail/page.js"],h="/excelprodetail/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/excelprodetail/page",pathname:"/excelprodetail",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},45461:(e,t,s)=>{Promise.resolve().then(s.bind(s,43809))},43809:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var a=s(30784),i=s(9885),n=s(11070),l=s(40116),d=s(21145),r=s(40335);s(92639);let components_CarbonTableSimple_CarbonTableSimple=({columns:e,jsonData:t,headingText1:s,headingText2:i})=>t&&0!==t.length?(0,a.jsxs)("div",{className:"my-component",children:[(0,a.jsxs)("div",{className:"fin-header-section",children:[a.jsx("div",{className:"fin-text-heading",children:s}),a.jsx("div",{className:"fin-text-heading-label",children:i})]}),a.jsx("div",{className:"fin-container",children:a.jsx(n.TableContainer,{children:(0,a.jsxs)(n.Table,{"aria-label":"sample table",children:[a.jsx(n.TableHead,{children:a.jsx(n.TableRow,{children:e.map(e=>a.jsx(n.TableHeader,{children:e}))})}),a.jsx(n.TableBody,{children:Object.keys(t).map(e=>(0,a.jsxs)(n.TableRow,{children:[a.jsx(n.TableCell,{children:a.jsx("span",{className:"fin-validation-error",children:e})}),a.jsx(n.TableCell,{children:t[e]})]}))})]})})})]}):a.jsx("p",{});var o=s(95275),c=s(37964),h=s(11605);s(86478);let ExcelDetailPage=class ExcelDetailPage extends i.Component{constructor(){super(),this.handleInputChange=(e,t)=>{this.setState(s=>{let a={...s};return a.main_data[t]=e.target.value,a})},this.handleDropDownChange=(e,t)=>{this.setState(s=>{let a={...s};return a.main_data[t]=e.selectedItem,a.resultUpload=null,a.resultIngest=null,this.handleTemplateChange(),a})},this.handleFileChangePOC=e=>{this.setState(t=>{let s={...t};return s.selectedFilePOC=e.target.files[0],s.resultUpload=null,s.resultIngest=null,s.msg_process=null,s.msg_save=null,s})},this.setLoading=e=>{this.setState(t=>{let s={...t};return s.loading=e,s})},this.handleBack=e=>{window.location.href="/excelpro"},this.handleSavePOC=e=>{this.postRequest("/api/excelpro/save",this.startLoading,this.stopLoading,this.sucessCallBackSave,this.state.main_data)},this.handleViewInScreen=()=>{let e={template_columns:this.state.resultUpload.template_columns,uploadedFile:this.state.resultUpload.uploadedFile,main_data:this.state.main_data};this.postRequest("/api/excelpro/viewInScreen",this.startLoading,this.stopLoading,this.sucessCallBackViewInScreen,e)},this.handleIngestToEnvizi=()=>{let e={template_columns:this.state.resultUpload.template_columns,uploadedFile:this.state.resultUpload.uploadedFile,main_data:this.state.main_data};this.postRequest("/api/excelpro/ingestToEnvizi",this.startLoading,this.stopLoading,this.sucessCallBackIngestToEnvizi,e)},this.handleUploadData=async()=>{this.startLoading();try{var e=this.envUtility.getAPIUrl()+"/api/excelpro/uploadData";let t=new FormData;t.append("file",this.state.selectedFilePOC),t.append("envizi_template",this.state.main_data.envizi_template);let s=await d.Z.post(e,t,{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data"}});this.sucessCallBackUpload(s)}catch(e){console.error("Error uploading file",e),this.stopLoading()}},this.sucessCallBackUpload=async e=>{this.setState(t=>{let s={...t};return s.resultUpload=e.data,s.uploaded_columns=e.data.uploaded_columns,s.msg_process=e.data.msg,s.loading=!1,s})},this.sucessCallBackIngestToEnvizi=e=>{this.setState(t=>{let s={...t};return s.resultIngest=e,s.msg_process=e.msg,s.loading=!1,s})},this.sucessCallBackViewInScreen=e=>{this.setState(t=>{let s={...t};return s.resultIngest=e,s.msg_process=e.msg,s.loading=!1,s})},this.sucessCallBackLoadNew=e=>{this.setState(t=>{let s={...t};return s.main_data=e.data,s.loading=!1,s})},this.sucessCallBackLoad=e=>{this.setState(t=>{let s={...t};return s.main_data=e.data,s.loading=!1,s})},this.sucessCallBackClone=e=>{this.setState(t=>{let s={...t};return s.main_data=e.data,s.main_data.id="",s.loading=!1,s})},this.sucessCallBackTemplateChange=e=>{this.setState(t=>{let s={...t};return s.main_data=e.data,s.loading=!1,s})},this.sucessCallBackSave=e=>{this.setState(t=>{let s={...t};return s.main_data=e.data,s.msg_save=e.msg,s.loading=!1,s})},this.startLoading=()=>{this.setState(e=>{let t={...e};return t.msg=null,t.msg_process=null,t.msg_save=null,t.loading=!0,t})},this.stopLoading=e=>{console.log(e),this.setState(e=>{let t={...e};return t.loading=!1,t})},this.postRequest=(e,t,s,a,i)=>{this.apiUtility.postRequest(e,t,s,a,i)},this.getJsonDataType4=()=>({id:1,text_value:"",uploaded_column:"",operation_value:"",operation_elements:["Append","+","-","*","/"]}),this.addItemAfterIndex=(e,t)=>{setItems(s=>[...s.slice(0,t+1),e,...s.slice(t+1)])},this.addNewElementAfterId=(e,t)=>{let s=items.findIndex(t=>t.id===e);-1!==s&&addItemAfterIndex(t,s)},this.findItemIndexByName=e=>{let t=this.state.main_data.fields;for(let s=0;s<t.length;s++){let a=t[s];if(a.name===e)return s}return -1},this.addField=(e,t)=>{let s=this.findItemIndexByName(e);if(-1!==s){let e=this.getJsonDataType4(),a=this.state.main_data.fields[s];a.list.splice(t,0,e),this.setState(e=>{let t={...e};return t.main_data.fields[s].list=a.list,t})}},this.removeField=(e,t)=>{let s=this.findItemIndexByName(e);if(-1!==s){let e=this.state.main_data.fields[s];e.list.splice(t,1),this.setState(t=>{let a={...t};return a.main_data.fields[s].list=e.list,a})}},this.handleTextValueChange=(e,t)=>{let s=this.findItemIndexByName(t);-1!==s&&this.setState(t=>{let{value:a}=e.target,i={...t};return i.main_data.fields[s].text_value=a,i})},this.handleListValueChange=(e,t)=>{let s=this.findItemIndexByName(t);-1!==s&&this.setState(t=>{let a=e.selectedItem,i={...t};return i.main_data.fields[s].list_value=a,i})},this.handleUploadedColumnValueChange=(e,t)=>{let s=this.findItemIndexByName(t);-1!==s&&this.setState(t=>{let a=e.selectedItem,i={...t};return i.main_data.fields[s].uploaded_column=a,i})},this.handleSubTextValueChange=(e,t,s)=>{let a=this.findItemIndexByName(t);-1!==a&&this.setState(t=>{let{value:i}=e.target,n={...t};return n.main_data.fields[a].list[s].text_value=i,n})},this.handleSubListValueChange=(e,t,s)=>{let a=this.findItemIndexByName(t);-1!==a&&this.setState(t=>{let i=e.selectedItem,n={...t};return n.main_data.fields[a].list[s].uploaded_column=i,n})},this.handleOperationListValueChange=(e,t,s)=>{let a=this.findItemIndexByName(t);-1!==a&&this.setState(t=>{let i=e.selectedItem,n={...t};return n.main_data.fields[a].list[s].operation_value=i,n})},this.apiUtility=new c.Z,this.state={loading:!0,main_data:null,uploaded_columns:[""],selectedFilePOC:null,resultUpload:null,resultIngest:null,msg_process:null,msg_save:null},this.envUtility=new h.Z}componentDidMount(){this.handlePageOnLoad()}handlePageOnLoad(){let e=new URLSearchParams(window.location.search),t=e.get("action"),s=e.get("id");"new"===t?this.handleNew():"load"===t?this.handleLoad(s):"clone"===t&&this.handleClone(s)}handleNew(){this.postRequest("/api/excelpro/loadnew",null,null,this.sucessCallBackLoadNew,{})}handleLoad(e){this.postRequest("/api/excelpro/load",null,null,this.sucessCallBackLoad,{id:e})}handleTemplateChange(){let e=this.state.main_data;this.postRequest("/api/excelpro/templatechange",this.startLoading,this.stopLoading,this.sucessCallBackTemplateChange,e)}handleClone(e){this.postRequest("/api/excelpro/load",null,null,this.sucessCallBackClone,{id:e})}render(){return(0,a.jsxs)(l.Grid,{children:[a.jsx(l.Column,{lg:16,md:8,sm:4,className:"landing-page__banner my-title-image",children:a.jsx("span",{className:"SubHeaderTitle",children:"Excel Data Processing"})}),a.jsx(l.Column,{lg:16,md:8,sm:4,className:"landing-page__r2",children:a.jsx(l.Grid,{className:"my-tabs-group-content",children:a.jsx(l.Column,{md:4,lg:16,sm:4,className:"landing-page__tab-content",children:a.jsx("table",{className:"fin-table",children:(0,a.jsxs)("tbody",{children:[a.jsx("tr",{children:a.jsx("td",{children:this.state.main_data&&(0,a.jsxs)("div",{className:"my-component",children:[(0,a.jsxs)("div",{className:"fin-header-section",children:[a.jsx("div",{className:"fin-text-heading",children:"Meta info"}),(0,a.jsxs)("div",{className:"fin-text-heading-label",children:["Enter the excel template information"," "]})]}),a.jsx("div",{className:"fin-container",children:a.jsx("table",{children:(0,a.jsxs)("tbody",{children:[a.jsx("tr",{children:a.jsx("td",{className:"instruction-label",children:a.jsx(l.TextInput,{class:"my-textbox",labelText:"Id",value:this.state.main_data.id,disabled:!0,onChange:e=>this.handleInputChange(e,"id")})})}),a.jsx("tr",{children:a.jsx("td",{className:"instruction-label",children:a.jsx(l.TextInput,{class:"my-textbox",labelText:"Name",value:this.state.main_data.name,onChange:e=>this.handleInputChange(e,"name")})})}),a.jsx("tr",{children:a.jsx("td",{className:"instruction-label",children:a.jsx(l.TextInput,{class:"my-textbox",labelText:"Desc",value:this.state.main_data.desc,onChange:e=>this.handleInputChange(e,"desc")})})}),a.jsx("tr",{children:a.jsx("td",{className:"instruction-label",children:a.jsx(l.Dropdown,{className:"gan-dropdown-operation",titleText:"Envizi Template",items:this.state.main_data.envizi_template_list,selectedItem:this.state.main_data.envizi_template,onChange:e=>this.handleDropDownChange(e,"envizi_template")})})})]})})})]})})}),a.jsx("tr",{children:a.jsx("td",{children:(0,a.jsxs)("div",{className:"my-component",children:[(0,a.jsxs)("div",{className:"fin-header-section",children:[a.jsx("div",{className:"fin-text-heading",children:"Data Ingestion to Envizi"}),a.jsx("div",{className:"fin-text-heading-label",children:"Upload the excel file that contains your data."})]}),a.jsx("div",{className:"fin-container",children:a.jsx("table",{children:(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"instruction-label",children:a.jsx("input",{type:"file",className:"file-class",onClick:this.handleFileChangePOC,onChange:this.handleFileChangePOC})}),a.jsx("td",{className:"instruction-label",children:a.jsx(l.Button,{className:"fin-button-1",onClick:()=>{this.handleUploadData()},disabled:!this.state.selectedFilePOC,children:"Load source data"})}),a.jsx("td",{className:"instruction-label",children:a.jsx(l.Button,{className:"fin-button-1",onClick:()=>{this.handleViewInScreen()},disabled:!this.state.resultUpload,children:"Preview"})}),a.jsx("td",{className:"instruction-label",children:a.jsx(l.Button,{className:"fin-button-1",onClick:()=>{this.handleIngestToEnvizi()},disabled:!this.state.resultUpload,children:"Ingest to Envizi"})}),a.jsx("td",{className:"instruction-label",children:a.jsx(l.Button,{className:"fin-button-1",onClick:()=>{this.handleBack()},children:"Back"})})]}),a.jsx("tr",{children:a.jsx("td",{children:a.jsx("span",{className:"instruction-msg",children:!this.state.loading&&this.state.msg_process?a.jsx("span",{children:this.state.msg_process}):a.jsx("span",{})})})})]})})})]})})}),a.jsx("tr",{children:a.jsx("td",{children:this.state.resultIngest&&this.state.resultIngest.processed_data&&(0,a.jsxs)("span",{children:[a.jsx(o.Z,{columns:this.state.resultIngest.template_columns,jsonData:this.state.resultIngest.processed_data,headingText1:"Data Generated",headingText2:"The below data have been pushed to Envizi"}),this.state.resultIngest.validation_errors&&Object.keys(this.state.resultIngest.validation_errors).length>0&&a.jsx(components_CarbonTableSimple_CarbonTableSimple,{columns:["Error","Rows"],jsonData:this.state.resultIngest.validation_errors,headingText1:"Validation Errors",headingText2:"The below validation errors occured in the data"})]})})}),a.jsx("tr",{children:a.jsx("td",{children:this.state.loading&&(0,a.jsxs)("div",{children:[a.jsx("p",{children:"\xa0"}),a.jsx(l.Loading,{description:"Loading content..."})]})})}),a.jsx("tr",{children:!this.state.loading&&this.state.main_data&&a.jsx("td",{children:(0,a.jsxs)("div",{className:"my-component",children:[(0,a.jsxs)("div",{className:"fin-header-section",children:[a.jsx("div",{className:"fin-text-heading",children:"Data Mapping"}),a.jsx("div",{className:"fin-text-heading-label",children:"Map the data from your uploaded excel file to the template columns"})]}),(0,a.jsxs)("div",{className:"fin-container",children:[this.state.main_data.fields.map((e,t)=>(0,a.jsxs)("div",{className:"fin-mapping-container",children:[a.jsx("div",{className:"fin-mapping-container2",children:(0,a.jsxs)("div",{className:"fin-row",children:[a.jsx("div",{className:"fin-column",children:a.jsx("div",{className:"fin-field-label",children:e.label})}),a.jsx("div",{className:"fin-column",children:a.jsx(l.TextInput,{className:"fin-text-box",value:e.text_value,size:"md",onChange:t=>this.handleTextValueChange(t,e.name)})}),a.jsx("div",{className:"fin-column",children:a.jsx(l.Dropdown,{className:"gan-dropdown-uploaded-columns",items:this.state.uploaded_columns,selectedItem:e.uploaded_column,size:"md",type:"default",onChange:t=>this.handleUploadedColumnValueChange(t,e.name)})}),a.jsx("div",{className:"fin-column",children:3==e.type&&a.jsx(l.Dropdown,{className:"gan-dropdown-existing-values",items:e.list_elements,size:"md",type:"default",selectedItem:e.list_value,onChange:t=>this.handleListValueChange(t,e.name)})})]})}),a.jsx("div",{className:"fin-mapping-container2",children:(2==e.type||3==e.type)&&e.list.map((t,s)=>(0,a.jsxs)("div",{className:"fin-row",children:[a.jsx("div",{className:"fin-column",children:a.jsx("div",{className:"fin-field-label"})}),a.jsx("div",{className:"fin-column",children:a.jsx(l.TextInput,{className:"fin-text-box1",value:t.text_value,onChange:t=>this.handleSubTextValueChange(t,e.name,s)})}),a.jsx("div",{className:"fin-column",children:a.jsx(l.Dropdown,{className:"gan-dropdown-uploaded-columns",items:this.state.uploaded_columns,selectedItem:t.uploaded_column,type:"default",onChange:t=>this.handleSubListValueChange(t,e.name,s)})}),a.jsx("div",{className:"fin-column",children:a.jsx(l.Dropdown,{className:"gan-dropdown-operation",items:t.operation_elements,selectedItem:t.operation_value,type:"default",onChange:t=>this.handleOperationListValueChange(t,e.name,s)})}),(0,a.jsxs)("div",{className:"fin-column",children:[a.jsx(l.Button,{kind:"secondary",className:"fin-button-icon",hasIconOnly:!0,renderIcon:r.Add,iconDescription:"Add",size:"sm",onClick:()=>this.addField(e.name,s+1)}),a.jsx(l.Button,{kind:"secondary",className:"fin-button-icon",hasIconOnly:!0,renderIcon:r.TrashCan,iconDescription:"Delete",size:"sm",onClick:()=>this.removeField(e.name,s)})]})]}))})]})),a.jsx("div",{className:"fin-mapping-container",children:(0,a.jsxs)("div",{className:"fin-row",children:[a.jsx("div",{className:"fin-column",children:a.jsx(l.Button,{className:"fin-button-1",onClick:this.handleSavePOC,children:"Save"})}),a.jsx("div",{className:"fin-column",children:a.jsx(l.Button,{className:"fin-button-1",onClick:this.handleBack,children:"Back"})}),a.jsx("div",{className:"fin-row",children:a.jsx("div",{children:a.jsx("span",{className:"instruction-msg",children:this.state.msg_save&&this.state.msg_save})})})]})})]})]})})})]})})})})})]})}};let m=ExcelDetailPage},37964:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n}),s(9885);var a=s(21145),i=s(11605);let n=class{constructor(){this.postRequest=(e,t,s,n,l)=>{let d=new i.Z;var r=d.getAPIUrl()+e;t&&t(),a.Z.post(r,l,{headers:{"Access-Control-Allow-Origin":"*"}}).then(e=>{n(e.data)}).catch(e=>{s&&s(e)})}}}},28200:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>r});var a=s(95153);let i=(0,a.createProxy)(String.raw`/Users/siraj/development/integration_hub/web/src/app/excelprodetail/page.js`),{__esModule:n,$$typeof:l}=i,d=i.default,r=d},92639:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[126,277,323,145,237,120],()=>__webpack_exec__(41730));module.exports=s})();